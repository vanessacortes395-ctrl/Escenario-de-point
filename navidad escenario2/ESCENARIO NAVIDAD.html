<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <title>ESCENARIO</title>
</head>
<body>
    <canvas id="myCanvas"></canvas>
    <!--El elemento HTML canvas se puede utilizar para dibujar graficas y secuencias de comandos(por lo general JavaScript) .--> </canvas>

<script type="importmap">
    {
        "imports":{
            "three": "./js/three.module.js",
            "three/OrbitControls": "./js/OrbitControls.js" 
        }
        
}
</script>
<script type="module"> 

//üóÉÔ∏èüóÉÔ∏è Mandar llamar a la librer√≠a
    import * as THREE from 'three'; 
    import {OrbitControls} from 'three/OrbitControls';
    console.log(OrbitControls);
    import { TextGeometry } from "./js/TextGeometry.js";
    import { FontLoader } from "./js/FontLoader.js";
    import arbol from "./objetos/arbol.js";
    import casa from "./objetos/casa.js";
    import pi√±ata from "./objetos/pi√±ata.js";
    import santa from "./objetos/santa.js";
    import BolaDeNieve from "./objetos/BolaDeNieve.js";
    import Vela from "./objetos/vela.js";
    import Campana from "./objetos/Campana.js";
    import CasaNavidad from "./objetos/casagrande.js";
    import Lampara from "./objetos/Lampara.js";
    import tren from "./objetos/tren.js";
    import Tunel from "./objetos/tunel.js";
    import pista from "./objetos/pista.js";
    import Cascanueces from "./objetos/cascanueces.js";
    import corona from "./objetos/corona.js";
    import Mu√±eco from "./objetos/mu√±eco.js";
    import Pinguino from "./objetos/pinguino.js";
    import Banca from "./objetos/banca.js";
    import Carrusel from "./objetos/carrusel.js";
    import Regalos from "./objetos/regalos.js";
    import Barda from "./objetos/barda.js";
    import Iglesia from "./objetos/iglesia.js";

    
//üïπÔ∏èüïπÔ∏è Renderer - Realiza una conexi√≥n entre el c√≥digo y el canvas
    var renderer = new THREE.WebGLRenderer({
    canvas: document.getElementById('myCanvas'), antialias: true,
    });
    renderer.setPixelRatio(window.decivePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
    //FONDO
    renderer.setClearColor(0xD1C2CF);


// üé¨ Creando nueva escena - Es el espacio donde se colocan los objetos
    var scene = new THREE.Scene();

//üé•üé• Agregar una c√°mara de perspectiva
    var camera = new THREE.PerspectiveCamera(70,window.innerWidth / window.innerHeight,0.1,2000
      );
    scene.add(camera);

    //Settings de la c√°mara
    camera.position.set(0, 4, 30);

    // A√±adiendo los OrbitControls
    var controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;

    var gridHelper = new THREE.GridHelper(50,50,);
    //scene.add (gridHelper);

    var gridHelper = new THREE.PolarGridHelper(20,16,20,64);
    //scene. add (gridHelper); //maya

    var gridHelper = new THREE.AxesHelper(500);
    //scene. add (gridHelper);  //lineas de coodenadas

    ///LUCES
const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
scene.add(ambientLight);
var light1= new THREE.DirectionalLight(0Xffffff,0.8);
light1.position.set (50,50,50);
scene.add(light1);

//scene.add(light1);

//  Fondo
const loader = new THREE.TextureLoader();
scene.background = loader.load('./assets/fondo.png');

// BASE
const geometryBase = new THREE.BoxGeometry(500, 0.1, 500);
const materialBase = new THREE.MeshLambertMaterial({ map: loader.load('./assets/piso1.jpg') });
const meshBase = new THREE.Mesh(geometryBase, materialBase);
meshBase.position.set(0, -1, 0);
meshBase.castShadow = true;
scene.add(meshBase);

// Piedra
const geometryPiedra = new THREE.CylinderGeometry(25, 15, 14, 26);
const materialPiedra = new THREE.MeshLambertMaterial({ color: 0x2D2E2E });
const meshPiedra = new THREE.Mesh(geometryPiedra, materialPiedra);
meshPiedra.position.set(0, 6.5, -120);
scene.add(meshPiedra);


// Bloque 1
const geometryNieve1 = new THREE.BoxGeometry(350, 50, 80);
const materialNieve1 = new THREE.MeshLambertMaterial({ color: 0xCBD9DC });
const meshNieve1 = new THREE.Mesh(geometryNieve1, materialNieve1);
meshNieve1.position.set(-70, 25, -210);
scene.add(meshNieve1);

// CASA IZQUIERDA (escala 8)
const miCasagrandeIzq = CasaNavidad({ x: -200, y: 50, z: -210 });
scene.add(miCasagrandeIzq);
miCasagrandeIzq.scale.set(8, 8, 10);

// CASA DERECHA (escala 8)
const miCasagrandeDer = CasaNavidad({ x:40, y: 50, z: -210 });
scene.add(miCasagrandeDer);
miCasagrandeDer.scale.set(8, 8, 10);
    

// OBJETOS
//pi√±ata
var miPi√±ata= pi√±ata({ x: 0, y: 35, z: 220 });
scene.add(miPi√±ata);
miPi√±ata.scale.set(4, 4, 4);
miPi√±ata.rotation.Z=-0.157;

var miPi√±ataDer= pi√±ata({ x: -90, y: 50, z: 220 });
scene.add(miPi√±ataDer);
miPi√±ataDer.scale.set(3, 3, 3);
miPi√±ataDer.rotation.Z=-0.157;

var miPi√±ataIzq= pi√±ata({ x: 90, y: 50, z: 220 });
scene.add(miPi√±ataIzq);
miPi√±ataIzq.scale.set(3, 3, 3);
miPi√±ataIzq.rotation.Z=-0.157;

// arbol
var miArbol = arbol({ x: 0, y: 10, z: -120 });
scene.add(miArbol);
miArbol.scale.set(8, 8, 8);

// Casa
const miCasa = casa({ x: -200, y: 0.6, z: 150 });
scene.add(miCasa);
miCasa.scale.set(10, 12, 10);
miCasa.rotation.y = 7;

//casa izquerda
const miCasaIzq = casa({ x: -200, y: 0.6, z: -100 });
scene.add(miCasaIzq);
miCasaIzq.scale.set(10, 12, 10);
miCasaIzq.rotation.y = 7;


// santa
const miSanta = santa({ x: -80, y: 0.6, z:-80 });
scene.add(miSanta);
miSanta.scale.set(6, 5, 5);
//miSanta.rotation.y = -1.57;

// BOLA DE NIEVE
const miBola = BolaDeNieve({ x: 0, y: 0.6, z:100 });
scene.add(miBola);
miBola.scale.set(5, 5, 5);


//CAMPANA
const miCampana = Campana({ x: -50, y: 90, z:230 });
scene.add(miCampana);
miCampana.scale.set(4, 4, 4);

//CAMPANA
const miCampanaDer = Campana({ x: 50, y: 90, z:230 });
scene.add(miCampanaDer);
miCampanaDer.scale.set(4, 4, 4);

//CAMPANA
const miCampanaDer2 = Campana({ x: -150, y: 90, z:230 });
scene.add(miCampanaDer2);
miCampanaDer2.scale.set(4, 4, 4);

//CAMPANA
const miCampana2 = Campana({ x: 150, y: 90, z:230 });
scene.add(miCampana2);
miCampana2.scale.set(4, 4, 4);

//CASA GRANDE
const miCasagrande = CasaNavidad({ x: -80, y: 50, z:-210 });
scene.add(miCasagrande);
miCasagrande.scale.set(10, 10, 10);

//Lampara
const miLampara = Lampara({ x: 200, y: 1, z:230 });
scene.add(miLampara);
miLampara.scale.set(3, 3, 3);
miLampara.rotation.y = 4.5;

//Lampara
const miLamparaIzq = Lampara({ x: -200, y: 1, z:230 });
scene.add(miLamparaIzq);
miLamparaIzq.scale.set(3, 3, 3);
miLamparaIzq.rotation.y = -4.5;

// CABLE ENTRE L√ÅMPARAS
const cableGeo = new THREE.BoxGeometry(400, 1, 1);
const cableMat = new THREE.MeshLambertMaterial({ color: 0x000000 });

const cable = new THREE.Mesh(cableGeo, cableMat);

// posici√≥n al centro entre ambas l√°mparas
cable.position.set(0, 100, 230);  
scene.add(cable);

//TREN
const miTren = tren({ x: 170, y: 10, z:80 });
scene.add(miTren);
miTren.scale.set(3, 3, 3);
miTren.rotation.y=-11;

//Tunel
const miTunel = Tunel({ x: 170, y: -10, z:-40 });
scene.add(miTunel);
miTunel.scale.set(3, 4, 4);
miTunel.rotation.y=-11;

//Iglesia
const miIglesia = Iglesia({ x: 170, y: 100, z:-220 });
scene.add(miIglesia);
miIglesia.scale.set(5, 8, 5);


//Pista
const miPista = pista({ x: 0, y: 0, z:100 });
scene.add(miPista);
miPista.scale.set(0.5, 0.5, 0.5);

//Cascanueces
const miCascanueces = Cascanueces({ x: 80, y: 0.6, z:-80 });
scene.add(miCascanueces);
miCascanueces.scale.set(4, 4, 4);

//CORONA
const miCorona= corona({ x: 170, y: 120, z:-130 });
scene.add(miCorona);
miCorona.scale.set(4, 4, 4);

// Mu√±eco de nieve
const MiMu√±eco= Mu√±eco({ x: 24, y: 2.5, z:30 });
scene.add(MiMu√±eco);
MiMu√±eco.scale.set(5, 5, 5);

// Mu√±eco de nieve
const MiMu√±eco1= Mu√±eco({ x:- 44, y: 2.5, z:85 });
scene.add(MiMu√±eco1);
MiMu√±eco1.scale.set(5, 5, 5);

//pinguino
const miPinguino = Pinguino({ x: 0, y: 2.5, z: 20 });
scene.add(miPinguino);
miPinguino.scale.set(5, 5, 5);

//pinguino
const miPinguino1 = Pinguino({ x: 46, y: 2.5, z: 105 });
scene.add(miPinguino1);
miPinguino1.scale.set(5, 5, 5);

//pinguino
const miPinguino2 = Pinguino({ x: -46, y: 2.5, z: 135 });
scene.add(miPinguino2);
miPinguino2.scale.set(5, 5, 5);

//Banca
const MiBanca = Banca({ x: 0, y: 0, z: 0 });
scene.add(MiBanca);
MiBanca.scale.set(15, 15, 10);

//carrusel
const miCarrusel = Carrusel({ x: -180, y: 0, z:20 });
scene.add(miCarrusel);
miCarrusel.scale.set(8, 8, 8);

//Regalos
const miregalos = Regalos({ x: 45, y: 0.6, z:-95 });
scene.add(miregalos);
miregalos.scale.set(8, 8, 8);

//Regalos
const miregalos1 = Regalos({ x: 0, y: 0.6, z:-80 });
scene.add(miregalos1);
miregalos1.scale.set(8, 8, 8);
miregalos1.rotation.y=8.5;
//Regalos
const miregalos2 = Regalos({ x: -45, y: 0.6, z:-95 });
scene.add(miregalos2);
miregalos2.scale.set(8, 8, 8);
miregalos2.rotation.y=-8.2;

//BARDA
const MiBarda = Barda({ x: 100, y: 0.6, z:-95 });
scene.add(MiBarda);
MiBarda.scale.set(15, 15, 15);
MiBarda.rotation.y=11;
//BARDA
const MiBarda1 = Barda({ x: 100, y: 0.6, z:0 });
scene.add(MiBarda1);
MiBarda1.scale.set(15, 15, 15);
MiBarda1.rotation.y=11;
//BARDA
const MiBarda2 = Barda({ x: 100, y: 0.6, z:95});
scene.add(MiBarda2);
MiBarda2.scale.set(15, 15, 15);
MiBarda2.rotation.y=11;

//BARDA
const MiBarda3 = Barda({ x: 240, y: 0.6, z:-95 });
scene.add(MiBarda3);
MiBarda3.scale.set(15, 15, 15);
MiBarda3.rotation.y=-11;
//BARDA
const MiBarda4 = Barda({ x: 240, y: 0.6, z:0 });
scene.add(MiBarda4);
MiBarda4.scale.set(15, 15, 15);
MiBarda4.rotation.y=-11;

//BARDA
const MiBarda5 = Barda({ x: 240, y: 0.6, z:95});
scene.add(MiBarda5);
MiBarda5.scale.set(15, 15, 15);
MiBarda5.rotation.y=-11;

//üé∞üé∞Rendering y animaci√≥n
    requestAnimationFrame(render);
    function render() {

    //ü™Ñü™Ñ Animaci√≥n - 

    //üéÆüéÆActualizaci√≥n del OrbitControls para generar la suavidad de movimiento
    controls.update();

    //Llamado para renderizar y volver a llamar a la misma funci√≥n (render)
    renderer.render(scene, camera);
    requestAnimationFrame(render);

    }
</script>
</body>
</html>